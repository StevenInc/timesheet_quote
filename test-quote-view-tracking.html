<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Quote View Tracking</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        button { padding: 10px 20px; margin: 10px 5px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        input { padding: 8px; margin: 5px; width: 300px; }
        .result { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <h1>Test Quote View Tracking</h1>

    <div class="test-section">
        <h3>Test Edge Function Directly</h3>
        <p>Test your deployed Edge Function with a sample revision ID:</p>
        <p><strong>Note:</strong> Edge Functions require authorization. Use the Supabase client test below instead.</p>
        <input type="text" id="revisionId" placeholder="Enter revision ID (e.g., test-123)" value="test-123">
        <button onclick="testEdgeFunction()">Test Edge Function</button>
        <div id="edgeFunctionResult"></div>
    </div>

    <div class="test-section">
        <h3>Test with Supabase Client</h3>
        <p>This is the proper way to test Edge Functions. The Supabase client handles authentication automatically:</p>
        <input type="text" id="supabaseRevisionId" placeholder="Enter revision ID" value="test-456">
        <button onclick="testSupabaseClient()">Test Supabase Client</button>
        <div id="supabaseResult"></div>
    </div>

    <div class="test-section">
        <h3>Current Status</h3>
        <p><strong>Edge Function URL:</strong> https://zubptseezvdtjlwtpooq.supabase.co/functions/v1/track-quote-view</p>
        <p><strong>Status:</strong> ✅ Deployed and Ready</p>
    </div>

    <script>
                async function testEdgeFunction() {
            const revisionId = document.getElementById('revisionId').value;
            const resultDiv = document.getElementById('edgeFunctionResult');

            resultDiv.innerHTML = '<div class="result error">❌ Edge Functions require proper authorization. Use the Supabase client test below instead.</div>';

            // Note: Direct testing of Edge Functions requires proper auth headers
            // which are typically handled by the Supabase client
        }

        async function testSupabaseClient() {
            const revisionId = document.getElementById('supabaseRevisionId').value;
            const resultDiv = document.getElementById('supabaseResult');

            resultDiv.innerHTML = '<div class="result">⚠️ This requires Supabase client configuration. Check browser console for details.</div>';

            // This would work in your actual app with proper Supabase setup
            console.log('To test with Supabase client, you need to:');
            console.log('1. Have Supabase client properly configured');
            console.log('2. Be in your React app environment');
            console.log('3. Call QuoteViewService.trackQuoteView()');
        }
    </script>
</body>
</html>
